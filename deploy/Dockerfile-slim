FROM node:12-slim

ARG version=unknown
ENV VERSION=$version

ADD web /src
ADD build/templates /templates

WORKDIR /src

RUN chmod +x /src/bin/kurl

EXPOSE 3000
CMD ["node", "--max-old-space-size=4096", "--no-deprecation", "bin/kurl", "serve"]
