<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Form to upload TLS certificate and key">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TLS Certificate and Key Upload</title>
    <link rel="stylesheet" href="/tls/assets/tls-custom.css" />
</head>
<body>
    {{if .Error }}
    <div class="tlsContent--wrapper">
        <div class="notification is-warning">
            <p>The certficate and key pair you uploaded was invalid</p>
        </div>
    </div>
    {{end}}

    {{if .Success }}
    <div class="tlsContent--wrapper">
        <div class="notification is-success">
            <p>Waiting for server to restart with new certificate</p>
        </div>
    </div>
    <script>setTimeout(function() {location.href = "/"}, 2000);</script>
    {{end}}

    {{if .Enabled}}
    <div class="flex-column flex1">
        <div class="tlsContent--wrapper">
            <div>
                <p class="tls-header">HTTPS for admin console</p>
                <p class="tls-header-sub">We're currently using a self-signed TLS certificate to secure the communication between your browser & the management console. If you don't upload your own TLS cert, you'll see a warning about this in your browser every time you access the management console.</p>
            </div>
            <div>
                <p class="tls-section-header">Private key & certificate</p>
                <p class="tls-section-sub">Files will be uploaded directly to the new cluster and stored in a volume. The files you upload here will not leave your network.</p>
            </div>
            <form class="flex-column" action="" method="post" enctype="multipart/form-data">
                <div>
                    <p class="tls-section-header">Hostname</p>
                    <p class="tls-section-sub">Ensure this domain name is routable on your network.</p>
                    <input class="form-input larger" type="text" name="hostname" placeholder="app.yourdomain.com" style="width: 200px; margin-bottom: 20px;" />
                </div>
                <div class="flex upload-form">
                    <div class="u-position--relative flex-column flex-auto u-marginRight--15">
                        <label class="tls-section-header" for="cert">Upload SSL certificate</label>
                        <input class="" id="cert" type="file" name="cert">
                    </div>
                    <div class="u-position--relative flex-column flex-auto">
                        <label class="tls-section-header" for="key">Upload private key</label>
                        <input class="" id="key" type="file" name="key">
                    </div>
                </div>
    
                <div class="button-wrapper flex alignItems--center">
                    <button class="btn primary" type="submit">Upload &amp; continue</button>
                    <div class="flex-column justifyContent--center">
                        <button class="text-button" type="submit" formaction="/tls/skip">Skip &amp; continue</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    {{end}}

    {{if .Help}}
    <div class="tlsContent--wrapper">
        <div class="notification is-info">
            <p>Anonymous uploads have been disabled. Set acceptAnonymousUploads to 1 in the {{ .Secret }} secret to re-enable.</p>
        </div>
    </div>
    {{end}}
</body>
</html>
